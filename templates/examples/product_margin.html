<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Margin Analysis</title>
    <link rel="stylesheet" href="../base/dashboard_base.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-shell">
        <nav class="card sidebar-dark" aria-label="Primary navigation" style="width:280px;background:linear-gradient(180deg,rgba(15,23,42,0.94),rgba(15,23,42,0.82));padding:28px;border-radius:24px;box-shadow:var(--shadow-soft);">
            <header style="display:flex;align-items:center;justify-content:space-between;margin-bottom:28px;">
                <div>
                    <div class="meta-label">Finvision</div>
                    <strong style="color:var(--text-primary);font-size:18px;">Margin Command</strong>
                </div>
                <button type="button" class="chip" aria-label="Collapse navigation">
                    <i data-lucide="panel-left" aria-hidden="true"></i>
                </button>
            </header>
            <ul style="list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;">
                <li>
                    <a href="#" class="chip nav-active" aria-current="page" style="display:flex;justify-content:space-between;">
                        <span style="display:flex;align-items:center;gap:12px;">
                            <i data-lucide="grid" aria-hidden="true"></i>
                            Overview
                        </span>
                        <span class="chip" style="padding:2px 6px;font-size:10px;">Live</span>
                    </a>
                </li>
                <li><a href="#" class="chip nav-item"><i data-lucide="trending-up"></i> Pipeline</a></li>
                <li><a href="#" class="chip nav-item"><i data-lucide="circle-dollar-sign"></i> Revenue</a></li>
                <li><a href="#" class="chip nav-item"><i data-lucide="factory"></i> Operations</a></li>
                <li><a href="#" class="chip nav-item"><i data-lucide="shield"></i> Risk</a></li>
            </ul>
            <footer style="margin-top:32px;border-top:1px solid rgba(148,163,184,0.14);padding-top:20px;">
                <div style="display:flex;align-items:center;gap:12px;">
                    <span class="chip" style="width:40px;height:40px;border-radius:14px;justify-content:center;">
                        <i data-lucide="user" aria-hidden="true"></i>
                    </span>
                    <div>
                        <div style="color:var(--text-primary);font-weight:600;">Jordan Blake</div>
                        <div class="muted" style="font-size:12px;">Chief Revenue Officer</div>
                    </div>
                </div>
            </footer>
        </nav>

        <div class="dashboard-surface">
            <main class="main-content" role="main">
                <header class="header-bar">
                    <div class="header-title">
                        <h1>Product Margin Command Center</h1>
                        <p>Margin health across enterprise portfolio with leading indicators</p>
                    </div>
                    <div class="header-actions">
                        <div style="display:flex;gap:10px;">
                            <button type="button" class="chip positive" aria-pressed="true">Last 30 days</button>
                            <button type="button" class="chip control-muted" aria-pressed="false">Quarter to date</button>
                            <button type="button" class="chip" aria-label="Custom date range">
                                <i data-lucide="calendar"></i>
                                Custom
                            </button>
                        </div>
                    </div>
                </header>

                <section class="dashboard-grid">
                <!-- KPI strip -->
                <div class="card span-3">
                    <div class="meta-label">Gross Margin</div>
                    <div style="display:flex;align-items:flex-end;justify-content:space-between;margin-top:16px;">
                        <div>
                            <div style="font-size:34px;color:var(--text-primary);font-weight:600;">58.2%</div>
                            <div class="muted" style="margin-top:6px;">Target 55%</div>
                        </div>
                        <span class="chip positive">
                            <i data-lucide="arrow-up-right"></i>
                            +3.2 pts
                        </span>
                    </div>
                </div>
                <div class="card span-3">
                    <div class="meta-label">Net Margin</div>
                    <div style="display:flex;align-items:flex-end;justify-content:space-between;margin-top:16px;">
                        <div>
                            <div style="font-size:34px;color:var(--text-primary);font-weight:600;">28.4%</div>
                            <div class="muted" style="margin-top:6px;">vs 26.0% last quarter</div>
                        </div>
                        <span class="chip positive">
                            <i data-lucide="sparkles"></i>
                            Improving
                        </span>
                    </div>
                </div>
                <div class="card span-3">
                    <div class="meta-label">Contribution</div>
                    <div style="display:flex;align-items:flex-end;justify-content:space-between;margin-top:16px;">
                        <div>
                            <div style="font-size:34px;color:var(--text-primary);font-weight:600;">44.9%</div>
                            <div class="muted" style="margin-top:6px;">+180 bps YoY</div>
                        </div>
                        <span class="chip">
                            <i data-lucide="flame"></i>
                            In focus
                        </span>
                    </div>
                </div>
                <div class="card span-3">
                    <div class="meta-label">Retention Health</div>
                    <div style="display:flex;align-items:center;gap:16px;margin-top:18px;">
                        <svg viewBox="0 0 120 120" role="img" aria-label="Retention 91 percent" style="width:78px;height:78px;">
                            <circle cx="60" cy="60" r="50" stroke="rgba(148,163,184,0.2)" stroke-width="12" fill="none" />
                            <circle cx="60" cy="60" r="50" stroke="var(--accent-secondary)" stroke-width="12" fill="none"
                                stroke-dasharray="314" stroke-dashoffset="56" stroke-linecap="round" transform="rotate(-90 60 60)" />
                        </svg>
                        <div>
                            <div style="color:var(--text-primary);font-size:30px;font-weight:600;">91%</div>
                            <div class="muted" style="font-size:12px;margin-top:6px;">Net revenue retention</div>
                        </div>
                    </div>
                </div>

                <!-- Golden split -->
                <div class="card span-8">
                    <div class="meta-label">Margin by Product</div>
                    <h2 style="margin:12px 0 18px;color:var(--text-primary);font-size:18px;">Enterprise portfolio performance</h2>
                    <div class="chart-canvas">
                        <svg viewBox="0 0 640 280" style="position:absolute;inset:24px;">
                            <defs>
                                <linearGradient id="marginFill" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="0%" stop-color="rgba(34,211,238,0.32)" />
                                    <stop offset="100%" stop-color="rgba(59,130,246,0.06)" />
                                </linearGradient>
                            </defs>
                            <path d="M0 220 L60 204 L120 196 L180 172 L240 158 L300 148 L360 134 L420 122 L480 112 L540 96 L600 82 L640 74 L640 260 L0 260 Z"
                                fill="url(#marginFill)" />
                            <polyline points="0,220 60,204 120,196 180,172 240,158 300,148 360,134 420,122 480,112 540,96 600,82 640,74"
                                stroke="var(--accent-secondary)" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                            <circle cx="640" cy="74" r="8" fill="var(--accent-secondary)" />
                        </svg>
                    </div>
                    <div class="legend" style="margin-top:18px;">
                        <span class="legend-item">
                            <span class="legend-swatch" style="background:var(--accent-secondary);"></span>
                            Margin %
                        </span>
                        <span class="legend-item">
                            <span class="legend-swatch" style="background:var(--accent-primary);"></span>
                            Revenue Mix
                        </span>
                    </div>
                </div>
                <div class="card span-4">
                    <div class="meta-label">Drivers</div>
                    <h2 style="margin:12px 0;color:var(--text-primary);font-size:18px;">Margin change bridge</h2>
                    <div style="display:flex;flex-direction:column;gap:16px;">
                        <div>
                            <div style="display:flex;justify-content:space-between;font-size:13px;">
                                <span>Price realization</span>
                                <span style="color:var(--accent-positive);">+1.8 pts</span>
                            </div>
                            <div class="inline-bar-track" style="margin-top:8px;">
                                <div class="inline-bar-fill" style="width:68%;"></div>
                            </div>
                        </div>
                        <div>
                            <div style="display:flex;justify-content:space-between;font-size:13px;">
                                <span>Discount discipline</span>
                                <span style="color:var(--accent-positive);">+0.9 pts</span>
                            </div>
                            <div class="inline-bar-track" style="margin-top:8px;">
                                <div class="inline-bar-fill" style="width:44%;"></div>
                            </div>
                        </div>
                        <div>
                            <div style="display:flex;justify-content:space-between;font-size:13px;">
                                <span>Mix shift</span>
                                <span style="color:var(--accent-negative);">-0.4 pts</span>
                            </div>
                            <div class="inline-bar-track" style="margin-top:8px;">
                                <div class="inline-bar-fill" style="width:24%;background:linear-gradient(90deg,var(--accent-negative),#7f1d1d);"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Table and status -->
                <div class="card span-7">
                    <div class="meta-label">Margin by Segment</div>
                    <h2 style="margin:12px 0;color:var(--text-primary);font-size:18px;">Contribution detail</h2>
                    <table class="table" role="table" aria-label="Margin by segment">
                        <thead>
                            <tr>
                                <th scope="col">Segment</th>
                                <th scope="col" style="text-align:right;">Margin</th>
                                <th scope="col" style="text-align:right;">YoY</th>
                                <th scope="col" style="text-align:right;">Inline</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Enterprise Suite</td>
                                <td style="text-align:right;color:var(--text-primary);font-weight:600;">42.6%</td>
                                <td style="text-align:right;color:var(--accent-positive);font-weight:500;">+4.1%</td>
                                <td>
                                    <div class="inline-bar-track">
                                        <div class="inline-bar-fill" style="width:72%;"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Analytics Cloud</td>
                                <td style="text-align:right;color:var(--text-primary);font-weight:600;">38.2%</td>
                                <td style="text-align:right;color:var(--accent-positive);font-weight:500;">+2.7%</td>
                                <td>
                                    <div class="inline-bar-track">
                                        <div class="inline-bar-fill" style="width:64%;"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Operations Suite</td>
                                <td style="text-align:right;color:var(--text-primary);font-weight:600;">29.4%</td>
                                <td style="text-align:right;color:var(--accent-negative);font-weight:500;">-1.9%</td>
                                <td>
                                    <div class="inline-bar-track">
                                        <div class="inline-bar-fill" style="width:48%;background:linear-gradient(90deg,var(--accent-negative),#7f1d1d);"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card span-5">
                    <div class="meta-label">Risk Posture</div>
                    <h2 style="margin:12px 0;color:var(--text-primary);font-size:18px;">Alerts and watchlist</h2>
                    <div style="display:flex;flex-direction:column;gap:16px;">
                        <div style="display:flex;align-items:center;gap:12px;">
                            <span class="chip" style="color:var(--accent-positive);border-color:rgba(34,197,94,0.24);">24 Stable</span>
                            <span class="muted" style="font-size:12px;">On track</span>
                        </div>
                        <div style="display:flex;align-items:center;gap:12px;">
                            <span class="chip" style="color:var(--accent-warning);border-color:rgba(245,158,11,0.24);">6 Watch</span>
                            <span class="muted" style="font-size:12px;">Monitor discount ramp</span>
                        </div>
                        <div style="display:flex;align-items:center;gap:12px;">
                            <span class="chip" style="color:var(--accent-negative);border-color:rgba(239,68,68,0.24);">2 Critical</span>
                            <span class="muted" style="font-size:12px;">Immediate playbook review</span>
                        </div>
                    </div>
                </div>
                </section>
            </main>
        </div>
    </div>
    <script>
        if (window.lucide && lucide.createIcons) {
            lucide.createIcons();
        }
    </script>
</body>
</html>
