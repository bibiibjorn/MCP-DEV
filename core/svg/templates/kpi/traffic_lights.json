{
  "templates": [
    {
      "template_id": "kpi_traffic_light_3",
      "name": "Three-State Traffic Light",
      "category": "kpi",
      "subcategory": "traffic_lights",
      "description": "Circle that changes color based on three threshold values (red/yellow/green). Perfect for KPI status indicators.",
      "complexity": "basic",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _thresholdLow = {{threshold_low}}\nVAR _thresholdHigh = {{threshold_high}}\nVAR _color =\n    SWITCH(\n        TRUE(),\n        _value < _thresholdLow, \"{{color_bad}}\",\n        _value < _thresholdHigh, \"{{color_warning}}\",\n        \"{{color_good}}\"\n    )\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='\" & _color & \"'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Measure to evaluate (e.g., [Profit Margin])"
        },
        {
          "name": "threshold_low",
          "type": "scalar",
          "required": true,
          "default": 0.5,
          "description": "Below this value = bad (red)"
        },
        {
          "name": "threshold_high",
          "type": "scalar",
          "required": true,
          "default": 0.8,
          "description": "Above this value = good (green)"
        },
        {
          "name": "color_bad",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Color for bad state (default: red)"
        },
        {
          "name": "color_warning",
          "type": "color",
          "required": false,
          "default": "%23F59E0B",
          "description": "Color for warning state (default: amber)"
        },
        {
          "name": "color_good",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Color for good state (default: green)"
        }
      ],
      "supported_visuals": ["table", "matrix", "card", "slicer"],
      "tags": ["kpi", "conditional", "status", "traffic-light", "three-state", "red-amber-green"],
      "source": "Hat Full of Data / SQLBI patterns",
      "version": "1.0.0"
    },
    {
      "template_id": "kpi_traffic_light_2",
      "name": "Two-State Traffic Light",
      "category": "kpi",
      "subcategory": "traffic_lights",
      "description": "Simple good/bad indicator (green/red) based on a single threshold.",
      "complexity": "basic",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _threshold = {{threshold}}\nVAR _color = IF(_value >= _threshold, \"{{color_good}}\", \"{{color_bad}}\")\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='\" & _color & \"'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Measure to evaluate"
        },
        {
          "name": "threshold",
          "type": "scalar",
          "required": true,
          "default": 0,
          "description": "Threshold value (>= threshold = good)"
        },
        {
          "name": "color_good",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Good state color (default: green)"
        },
        {
          "name": "color_bad",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Bad state color (default: red)"
        }
      ],
      "supported_visuals": ["table", "matrix", "card", "slicer"],
      "tags": ["kpi", "conditional", "status", "binary", "pass-fail"],
      "source": "SQLBI patterns",
      "version": "1.0.0"
    },
    {
      "template_id": "kpi_traffic_light_4",
      "name": "Four-State Traffic Light",
      "category": "kpi",
      "subcategory": "traffic_lights",
      "description": "Four-state indicator with critical/bad/warning/good levels.",
      "complexity": "intermediate",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%230EA5E9'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _critical = {{threshold_critical}}\nVAR _low = {{threshold_low}}\nVAR _high = {{threshold_high}}\nVAR _color =\n    SWITCH(\n        TRUE(),\n        _value < _critical, \"{{color_critical}}\",\n        _value < _low, \"{{color_bad}}\",\n        _value < _high, \"{{color_warning}}\",\n        \"{{color_good}}\"\n    )\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='\" & _color & \"'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Measure to evaluate"
        },
        {
          "name": "threshold_critical",
          "type": "scalar",
          "required": true,
          "default": 0.25,
          "description": "Below this = critical (dark red)"
        },
        {
          "name": "threshold_low",
          "type": "scalar",
          "required": true,
          "default": 0.5,
          "description": "Below this = bad (red)"
        },
        {
          "name": "threshold_high",
          "type": "scalar",
          "required": true,
          "default": 0.75,
          "description": "Below this = warning (amber)"
        },
        {
          "name": "color_critical",
          "type": "color",
          "required": false,
          "default": "%23991B1B",
          "description": "Critical state color (default: dark red)"
        },
        {
          "name": "color_bad",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Bad state color (default: red)"
        },
        {
          "name": "color_warning",
          "type": "color",
          "required": false,
          "default": "%23F59E0B",
          "description": "Warning state color (default: amber)"
        },
        {
          "name": "color_good",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Good state color (default: green)"
        }
      ],
      "supported_visuals": ["table", "matrix", "card", "slicer"],
      "tags": ["kpi", "conditional", "status", "four-state", "severity"],
      "source": "Extended SQLBI patterns",
      "version": "1.0.0"
    },
    {
      "template_id": "kpi_traffic_light_horizontal",
      "name": "Horizontal Traffic Light",
      "category": "kpi",
      "subcategory": "traffic_lights",
      "description": "Traditional horizontal traffic light showing all three states with one highlighted.",
      "complexity": "intermediate",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 50'><rect x='0' y='0' width='150' height='50' rx='25' fill='%23374151'/><circle cx='25' cy='25' r='18' fill='%23DC2626' opacity='0.3'/><circle cx='75' cy='25' r='18' fill='%23F59E0B' opacity='0.3'/><circle cx='125' cy='25' r='18' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _low = {{threshold_low}}\nVAR _high = {{threshold_high}}\nVAR _redOpacity = IF(_value < _low, \"1\", \"0.3\")\nVAR _amberOpacity = IF(_value >= _low && _value < _high, \"1\", \"0.3\")\nVAR _greenOpacity = IF(_value >= _high, \"1\", \"0.3\")\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 50'><rect x='0' y='0' width='150' height='50' rx='25' fill='%23374151'/><circle cx='25' cy='25' r='18' fill='{{color_bad}}' opacity='\" & _redOpacity & \"'/><circle cx='75' cy='25' r='18' fill='{{color_warning}}' opacity='\" & _amberOpacity & \"'/><circle cx='125' cy='25' r='18' fill='{{color_good}}' opacity='\" & _greenOpacity & \"'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Measure to evaluate"
        },
        {
          "name": "threshold_low",
          "type": "scalar",
          "required": true,
          "default": 0.33,
          "description": "Below this = red active"
        },
        {
          "name": "threshold_high",
          "type": "scalar",
          "required": true,
          "default": 0.67,
          "description": "Above this = green active"
        },
        {
          "name": "color_bad",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Bad state color"
        },
        {
          "name": "color_warning",
          "type": "color",
          "required": false,
          "default": "%23F59E0B",
          "description": "Warning state color"
        },
        {
          "name": "color_good",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Good state color"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["kpi", "traffic-light", "horizontal", "visual-indicator"],
      "source": "Custom design",
      "version": "1.0.0"
    }
  ]
}
