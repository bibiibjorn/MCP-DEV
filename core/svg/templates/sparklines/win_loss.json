{
  "templates": [
    {
      "template_id": "sparkline_win_loss",
      "name": "Win/Loss Sparkline",
      "category": "sparklines",
      "subcategory": "win_loss",
      "description": "Binary win/loss chart showing success/failure as equal-height bars above/below baseline.",
      "complexity": "intermediate",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><rect x='5' y='5' width='10' height='15' fill='%2316A34A'/><rect x='20' y='5' width='10' height='15' fill='%2316A34A'/><rect x='35' y='20' width='10' height='15' fill='%23DC2626'/><rect x='50' y='5' width='10' height='15' fill='%2316A34A'/><rect x='65' y='20' width='10' height='15' fill='%23DC2626'/><rect x='80' y='5' width='10' height='15' fill='%2316A34A'/><rect x='95' y='5' width='10' height='15' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _data = {{data_table}}\nVAR _valueCol = {{value_column}}\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _padding = 5\nVAR _gap = {{bar_gap}}\nVAR _count = COUNTROWS(_data)\nVAR _barWidth = (_width - (2 * _padding) - ((_count - 1) * _gap)) / _count\nVAR _barHeight = (_height - (2 * _padding)) / 2 - 2\nVAR _baseline = _height / 2\nVAR _bars =\n    CONCATENATEX(\n        ADDCOLUMNS(\n            ADDCOLUMNS(_data, \"@idx\", ROWNUMBER(_data)),\n            \"@x\", _padding + ([\"@idx\"] - 1) * (_barWidth + _gap),\n            \"@y\", IF(_valueCol >= 0, _baseline - _barHeight, _baseline),\n            \"@color\", IF(_valueCol >= 0, \"{{color_win}}\", \"{{color_loss}}\")\n        ),\n        \"<rect x='\" & FORMAT([\"@x\"], \"0.0\") & \"' y='\" & FORMAT([\"@y\"], \"0.0\") & \"' width='\" & FORMAT(_barWidth, \"0.0\") & \"' height='\" & FORMAT(_barHeight, \"0.0\") & \"' fill='\" & [\"@color\"] & \"'/>\",\n        \"\",\n        [\"@idx\"], ASC\n    )\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'>\" & _bars & \"</svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "data_table",
          "type": "table",
          "required": true,
          "description": "Table expression returning the data points"
        },
        {
          "name": "value_column",
          "type": "column",
          "required": true,
          "description": "Column containing win (>=0) or loss (<0) values"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "SVG width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 40,
          "description": "SVG height"
        },
        {
          "name": "bar_gap",
          "type": "scalar",
          "required": false,
          "default": 2,
          "description": "Gap between bars"
        },
        {
          "name": "color_win",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Color for wins"
        },
        {
          "name": "color_loss",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Color for losses"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["sparkline", "win-loss", "binary", "streak"],
      "source": "Excel sparkline pattern",
      "version": "1.0.0"
    },
    {
      "template_id": "sparkline_dot_plot",
      "name": "Dot Plot Sparkline",
      "category": "sparklines",
      "subcategory": "win_loss",
      "description": "Dots positioned on a vertical scale based on values. Good for showing distribution.",
      "complexity": "advanced",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><circle cx='10' cy='15' r='4' fill='%230EA5E9'/><circle cx='25' cy='20' r='4' fill='%230EA5E9'/><circle cx='40' cy='30' r='4' fill='%230EA5E9'/><circle cx='55' cy='10' r='4' fill='%230EA5E9'/><circle cx='70' cy='25' r='4' fill='%230EA5E9'/><circle cx='85' cy='12' r='4' fill='%230EA5E9'/><circle cx='100' cy='18' r='4' fill='%230EA5E9'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _data = {{data_table}}\nVAR _valueCol = {{value_column}}\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _padding = 5\nVAR _dotRadius = {{dot_radius}}\nVAR _count = COUNTROWS(_data)\nVAR _chartHeight = _height - (2 * _padding) - (2 * _dotRadius)\nVAR _xStep = (_width - (2 * _padding)) / MAX(_count - 1, 1)\nVAR _minVal = MINX(_data, _valueCol)\nVAR _maxVal = MAXX(_data, _valueCol)\nVAR _range = IF(_maxVal = _minVal, 1, _maxVal - _minVal)\nVAR _dots =\n    CONCATENATEX(\n        ADDCOLUMNS(\n            ADDCOLUMNS(_data, \"@idx\", ROWNUMBER(_data)),\n            \"@cx\", _padding + ([\"@idx\"] - 1) * _xStep,\n            \"@cy\", _padding + _dotRadius + _chartHeight - ((_valueCol - _minVal) / _range * _chartHeight)\n        ),\n        \"<circle cx='\" & FORMAT([\"@cx\"], \"0.0\") & \"' cy='\" & FORMAT([\"@cy\"], \"0.0\") & \"' r='\" & _dotRadius & \"' fill='{{dot_color}}'/>\",\n        \"\",\n        [\"@idx\"], ASC\n    )\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'>\" & _dots & \"</svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "data_table",
          "type": "table",
          "required": true,
          "description": "Table expression returning the data points"
        },
        {
          "name": "value_column",
          "type": "column",
          "required": true,
          "description": "Column containing the values"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "SVG width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 40,
          "description": "SVG height"
        },
        {
          "name": "dot_radius",
          "type": "scalar",
          "required": false,
          "default": 4,
          "description": "Radius of each dot"
        },
        {
          "name": "dot_color",
          "type": "color",
          "required": false,
          "default": "%230EA5E9",
          "description": "Dot fill color"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["sparkline", "dot", "scatter", "distribution"],
      "source": "Custom design",
      "version": "1.0.0"
    }
  ]
}
