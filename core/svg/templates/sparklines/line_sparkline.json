{
  "templates": [
    {
      "template_id": "sparkline_line",
      "name": "Line Sparkline",
      "category": "sparklines",
      "subcategory": "line",
      "description": "Basic line sparkline showing trend over time. Requires CONCATENATEX for data points.",
      "complexity": "advanced",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><polyline points='5,30 20,25 35,35 50,20 65,22 80,15 95,18 110,10' fill='none' stroke='%230EA5E9' stroke-width='2'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _data = {{data_table}}\nVAR _valueCol = {{value_column}}\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _padding = 5\nVAR _chartWidth = _width - (2 * _padding)\nVAR _chartHeight = _height - (2 * _padding)\nVAR _minVal = MINX(_data, _valueCol)\nVAR _maxVal = MAXX(_data, _valueCol)\nVAR _range = IF(_maxVal = _minVal, 1, _maxVal - _minVal)\nVAR _count = COUNTROWS(_data)\nVAR _xStep = _chartWidth / MAX(_count - 1, 1)\nVAR _points =\n    CONCATENATEX(\n        ADDCOLUMNS(\n            ADDCOLUMNS(_data, \"@idx\", ROWNUMBER(_data)),\n            \"@x\", _padding + ([\"@idx\"] - 1) * _xStep,\n            \"@y\", _padding + _chartHeight - ((_valueCol - _minVal) / _range * _chartHeight)\n        ),\n        FORMAT([\"@x\"], \"0.0\") & \",\" & FORMAT([\"@y\"], \"0.0\"),\n        \" \",\n        [\"@idx\"], ASC\n    )\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'><polyline points='\" & _points & \"' fill='none' stroke='{{stroke_color}}' stroke-width='{{stroke_width}}'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "data_table",
          "type": "table",
          "required": true,
          "description": "Table expression returning the data points (e.g., SUMMARIZE over dates)"
        },
        {
          "name": "value_column",
          "type": "column",
          "required": true,
          "description": "Column containing the values to plot"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "SVG width in pixels"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 40,
          "description": "SVG height in pixels"
        },
        {
          "name": "stroke_color",
          "type": "color",
          "required": false,
          "default": "%230EA5E9",
          "description": "Line color"
        },
        {
          "name": "stroke_width",
          "type": "scalar",
          "required": false,
          "default": 2,
          "description": "Line thickness"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["sparkline", "line", "trend", "time-series"],
      "source": "SQLBI / Hat Full of Data patterns",
      "version": "1.0.0"
    },
    {
      "template_id": "sparkline_line_minmax",
      "name": "Line Sparkline with Min/Max Markers",
      "category": "sparklines",
      "subcategory": "line",
      "description": "Line sparkline with highlighted minimum and maximum points.",
      "complexity": "advanced",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><polyline points='5,30 20,25 35,35 50,20 65,22 80,15 95,18 110,10' fill='none' stroke='%230EA5E9' stroke-width='2'/><circle cx='35' cy='35' r='4' fill='%23DC2626'/><circle cx='110' cy='10' r='4' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _data = {{data_table}}\nVAR _valueCol = {{value_column}}\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _padding = 5\nVAR _chartWidth = _width - (2 * _padding)\nVAR _chartHeight = _height - (2 * _padding)\nVAR _minVal = MINX(_data, _valueCol)\nVAR _maxVal = MAXX(_data, _valueCol)\nVAR _range = IF(_maxVal = _minVal, 1, _maxVal - _minVal)\nVAR _count = COUNTROWS(_data)\nVAR _xStep = _chartWidth / MAX(_count - 1, 1)\nVAR _dataWithCoords =\n    ADDCOLUMNS(\n        ADDCOLUMNS(_data, \"@idx\", ROWNUMBER(_data)),\n        \"@x\", _padding + ([\"@idx\"] - 1) * _xStep,\n        \"@y\", _padding + _chartHeight - ((_valueCol - _minVal) / _range * _chartHeight)\n    )\nVAR _points =\n    CONCATENATEX(_dataWithCoords, FORMAT([\"@x\"], \"0.0\") & \",\" & FORMAT([\"@y\"], \"0.0\"), \" \", [\"@idx\"], ASC)\nVAR _minPoint = MINX(_dataWithCoords, IF(_valueCol = _minVal, \"<circle cx='\" & FORMAT([\"@x\"], \"0.0\") & \"' cy='\" & FORMAT([\"@y\"], \"0.0\") & \"' r='4' fill='{{color_min}}'/>\", \"\"))\nVAR _maxPoint = MAXX(_dataWithCoords, IF(_valueCol = _maxVal, \"<circle cx='\" & FORMAT([\"@x\"], \"0.0\") & \"' cy='\" & FORMAT([\"@y\"], \"0.0\") & \"' r='4' fill='{{color_max}}'/>\", \"\"))\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'><polyline points='\" & _points & \"' fill='none' stroke='{{stroke_color}}' stroke-width='{{stroke_width}}'/>\" & _minPoint & _maxPoint & \"</svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "data_table",
          "type": "table",
          "required": true,
          "description": "Table expression returning the data points"
        },
        {
          "name": "value_column",
          "type": "column",
          "required": true,
          "description": "Column containing the values to plot"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "SVG width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 40,
          "description": "SVG height"
        },
        {
          "name": "stroke_color",
          "type": "color",
          "required": false,
          "default": "%230EA5E9",
          "description": "Line color"
        },
        {
          "name": "stroke_width",
          "type": "scalar",
          "required": false,
          "default": 2,
          "description": "Line thickness"
        },
        {
          "name": "color_min",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Minimum point color"
        },
        {
          "name": "color_max",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Maximum point color"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["sparkline", "line", "minmax", "markers"],
      "source": "SQLBI patterns",
      "version": "1.0.0"
    },
    {
      "template_id": "sparkline_line_endpoint",
      "name": "Line Sparkline with Endpoint",
      "category": "sparklines",
      "subcategory": "line",
      "description": "Line sparkline with highlighted last value point.",
      "complexity": "advanced",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><polyline points='5,30 20,25 35,35 50,20 65,22 80,15 95,18 110,10' fill='none' stroke='%230EA5E9' stroke-width='2'/><circle cx='110' cy='10' r='4' fill='%230EA5E9'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _data = {{data_table}}\nVAR _valueCol = {{value_column}}\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _padding = 5\nVAR _chartWidth = _width - (2 * _padding)\nVAR _chartHeight = _height - (2 * _padding)\nVAR _minVal = MINX(_data, _valueCol)\nVAR _maxVal = MAXX(_data, _valueCol)\nVAR _range = IF(_maxVal = _minVal, 1, _maxVal - _minVal)\nVAR _count = COUNTROWS(_data)\nVAR _xStep = _chartWidth / MAX(_count - 1, 1)\nVAR _dataWithCoords =\n    ADDCOLUMNS(\n        ADDCOLUMNS(_data, \"@idx\", ROWNUMBER(_data)),\n        \"@x\", _padding + ([\"@idx\"] - 1) * _xStep,\n        \"@y\", _padding + _chartHeight - ((_valueCol - _minVal) / _range * _chartHeight)\n    )\nVAR _points =\n    CONCATENATEX(_dataWithCoords, FORMAT([\"@x\"], \"0.0\") & \",\" & FORMAT([\"@y\"], \"0.0\"), \" \", [\"@idx\"], ASC)\nVAR _lastX = _padding + (_count - 1) * _xStep\nVAR _lastVal = MAXX(FILTER(_dataWithCoords, [\"@idx\"] = _count), _valueCol)\nVAR _lastY = _padding + _chartHeight - ((_lastVal - _minVal) / _range * _chartHeight)\nVAR _endpoint = \"<circle cx='\" & FORMAT(_lastX, \"0.0\") & \"' cy='\" & FORMAT(_lastY, \"0.0\") & \"' r='4' fill='{{stroke_color}}'/>\"\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'><polyline points='\" & _points & \"' fill='none' stroke='{{stroke_color}}' stroke-width='{{stroke_width}}'/>\" & _endpoint & \"</svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "data_table",
          "type": "table",
          "required": true,
          "description": "Table expression returning the data points"
        },
        {
          "name": "value_column",
          "type": "column",
          "required": true,
          "description": "Column containing the values to plot"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "SVG width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 40,
          "description": "SVG height"
        },
        {
          "name": "stroke_color",
          "type": "color",
          "required": false,
          "default": "%230EA5E9",
          "description": "Line and endpoint color"
        },
        {
          "name": "stroke_width",
          "type": "scalar",
          "required": false,
          "default": 2,
          "description": "Line thickness"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["sparkline", "line", "endpoint", "current"],
      "source": "Common pattern",
      "version": "1.0.0"
    }
  ]
}
