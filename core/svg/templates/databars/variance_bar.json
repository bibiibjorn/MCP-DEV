{
  "templates": [
    {
      "template_id": "databar_variance",
      "name": "Variance Data Bar",
      "category": "databars",
      "subcategory": "variance",
      "description": "Centered data bar showing positive values right and negative values left of center.",
      "complexity": "intermediate",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 20'><line x1='60' y1='2' x2='60' y2='18' stroke='%23D1D5DB' stroke-width='1'/><rect x='60' y='5' width='36' height='10' rx='2' fill='%2316A34A'/></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _maxAbsValue = {{max_abs_value}}\nVAR _pct = MIN(MAX(ABS(_value) / _maxAbsValue, 0), 1)\nVAR _width = {{width}}\nVAR _height = {{height}}\nVAR _barHeight = _height * 0.6\nVAR _barY = (_height - _barHeight) / 2\nVAR _center = _width / 2\nVAR _halfWidth = _width / 2\nVAR _barWidth = _pct * _halfWidth\nVAR _barX = IF(_value >= 0, _center, _center - _barWidth)\nVAR _barColor = IF(_value >= 0, \"{{color_positive}}\", \"{{color_negative}}\")\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _width & \" \" & _height & \"'><line x1='\" & _center & \"' y1='2' x2='\" & _center & \"' y2='\" & (_height - 2) & \"' stroke='{{color_axis}}' stroke-width='1'/><rect x='\" & FORMAT(_barX, \"0.0\") & \"' y='\" & _barY & \"' width='\" & FORMAT(_barWidth, \"0.0\") & \"' height='\" & _barHeight & \"' rx='2' fill='\" & _barColor & \"'/></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Variance value (positive or negative)"
        },
        {
          "name": "max_abs_value",
          "type": "scalar",
          "required": true,
          "description": "Maximum absolute value for scaling"
        },
        {
          "name": "width",
          "type": "scalar",
          "required": false,
          "default": 120,
          "description": "Total width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 20,
          "description": "Total height"
        },
        {
          "name": "color_positive",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Positive value color"
        },
        {
          "name": "color_negative",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Negative value color"
        },
        {
          "name": "color_axis",
          "type": "color",
          "required": false,
          "default": "%23D1D5DB",
          "description": "Center axis color"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["databar", "variance", "positive-negative", "centered"],
      "source": "Common pattern",
      "version": "1.0.0"
    },
    {
      "template_id": "databar_variance_labeled",
      "name": "Variance Bar with Label",
      "category": "databars",
      "subcategory": "variance",
      "description": "Centered variance bar with value label showing the actual value.",
      "complexity": "intermediate",
      "preview_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 160 20'><line x1='60' y1='2' x2='60' y2='18' stroke='%23D1D5DB' stroke-width='1'/><rect x='60' y='5' width='36' height='10' rx='2' fill='%2316A34A'/><text x='130' y='14' font-size='10' fill='%2316A34A'>+30%</text></svg>",
      "dax_template": "{{measure_name}} =\nVAR _value = {{value_measure}}\nVAR _maxAbsValue = {{max_abs_value}}\nVAR _pct = MIN(MAX(ABS(_value) / _maxAbsValue, 0), 1)\nVAR _barWidth = {{bar_width}}\nVAR _height = {{height}}\nVAR _totalWidth = _barWidth + 45\nVAR _barHeight = _height * 0.6\nVAR _barY = (_height - _barHeight) / 2\nVAR _center = _barWidth / 2\nVAR _halfWidth = _barWidth / 2\nVAR _filledWidth = _pct * _halfWidth\nVAR _barX = IF(_value >= 0, _center, _center - _filledWidth)\nVAR _barColor = IF(_value >= 0, \"{{color_positive}}\", \"{{color_negative}}\")\nVAR _labelPrefix = IF(_value >= 0, \"+\", \"\")\nVAR _labelText = _labelPrefix & FORMAT(_value * 100, \"0\") & \"%25\"\nVAR _svg = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 \" & _totalWidth & \" \" & _height & \"'><line x1='\" & _center & \"' y1='2' x2='\" & _center & \"' y2='\" & (_height - 2) & \"' stroke='{{color_axis}}' stroke-width='1'/><rect x='\" & FORMAT(_barX, \"0.0\") & \"' y='\" & _barY & \"' width='\" & FORMAT(_filledWidth, \"0.0\") & \"' height='\" & _barHeight & \"' rx='2' fill='\" & _barColor & \"'/><text x='\" & (_barWidth + 5) & \"' y='\" & (_height * 0.7) & \"' font-size='\" & (_height * 0.5) & \"' fill='\" & _barColor & \"'>\" & _labelText & \"</text></svg>\"\nRETURN \"data:image/svg+xml;utf8,\" & _svg",
      "parameters": [
        {
          "name": "measure_name",
          "type": "string",
          "required": true,
          "description": "Name for the new SVG measure"
        },
        {
          "name": "value_measure",
          "type": "measure",
          "required": true,
          "description": "Variance value as decimal (e.g., 0.3 for 30%)"
        },
        {
          "name": "max_abs_value",
          "type": "scalar",
          "required": true,
          "description": "Maximum absolute value for scaling"
        },
        {
          "name": "bar_width",
          "type": "scalar",
          "required": false,
          "default": 100,
          "description": "Bar portion width"
        },
        {
          "name": "height",
          "type": "scalar",
          "required": false,
          "default": 20,
          "description": "Total height"
        },
        {
          "name": "color_positive",
          "type": "color",
          "required": false,
          "default": "%2316A34A",
          "description": "Positive value color"
        },
        {
          "name": "color_negative",
          "type": "color",
          "required": false,
          "default": "%23DC2626",
          "description": "Negative value color"
        },
        {
          "name": "color_axis",
          "type": "color",
          "required": false,
          "default": "%23D1D5DB",
          "description": "Center axis color"
        }
      ],
      "supported_visuals": ["table", "matrix"],
      "tags": ["databar", "variance", "labeled", "percentage"],
      "source": "Common pattern",
      "version": "1.0.0"
    }
  ]
}
