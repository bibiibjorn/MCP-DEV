{
  "server": {
    "name": "MCP-PowerBi-Finvision",
    "log_level": "INFO",
    "timeout_seconds": 60,
    "tool_names_mode": "friendly",
    "show_admin_tools": false
  },
  "performance": {
    "cache_ttl_seconds": 300,
    "cache_max_entries": 1000,
    "cache_max_size_mb": 100,
    "cache_eviction_policy": "lru",
    "max_query_timeout": 60,
    "default_top_n": 1000,
    "enable_trace_logging": false,
    "trace_mode": "full",
    "trace_init_retries": 2,
    "trace_init_backoff_ms": 150,
    "table_mapping_cache_ttl": 600,
    "batch_row_counting": true,
    "dependency_cache_ttl": 600
  },
  "detection": {
    "cache_instances_seconds": 60,
    "detection_timeout": 10,
    "max_instances": 10
  },
  "query": {
    "max_rows_preview": 1000,
    "max_dax_query_length": 50000,
    "enable_query_validation": true,
    "default_page_size": 20,
    "max_page_size": 200,
    "max_result_tokens": 15000,
    "default_dependency_depth": 2,
    "max_dependency_depth": 5,
    "describe_table_defaults": {
      "columns_page_size": 20,
      "measures_page_size": 20,
      "relationships_page_size": 50
    },
    "max_expression_display_length": 500,
    "default_info_limit": 100,
    "max_info_limit": 1000
  },
  "logging": {
    "structured_logging": false,
    "log_queries": false,
    "log_performance": true
  },
  "features": {
    "enable_bpa": true,
    "enable_performance_analysis": true,
    "enable_bulk_operations": true,
    "enable_calculation_groups": true,
    "enable_tmdl_automation": true,
    "enable_dax_context_analysis": true
  },
  "tmdl": {
    "enable_validation": true,
    "backup_before_edit": true,
    "backup_directory": "./backups/tmdl",
    "max_backup_age_days": 30,
    "max_bulk_operations": 1000,
    "validation_rules": {
      "check_syntax": true,
      "check_references": true,
      "check_data_types": true,
      "check_naming": true,
      "allow_hidden_references": false
    },
    "linting": {
      "enabled": true,
      "severity": "warning",
      "rules": {
        "hidden_column_referenced": true,
        "circular_dependencies": true,
        "unused_columns": true,
        "large_measure_count": true,
        "naming_conventions": true
      }
    },
    "templates": {
      "directory": "./core/tmdl/templates",
      "allow_custom": true,
      "auto_update": false
    }
  },
  "dax_context_analysis": {
    "enable": true,
    "max_expression_length": 50000,
    "analysis_timeout_seconds": 30,
    "performance_threshold_ms": 100,
    "nested_calculate_limit": 10,
    "detection": {
      "explicit_calculate": true,
      "implicit_measures": true,
      "iterator_transitions": true
    },
    "visualization": {
      "default_format": "html",
      "include_mermaid": true,
      "include_text": true,
      "highlight_performance_issues": true,
      "d3_version": "7.8.5"
    },
    "debugging": {
      "enable_step_through": true,
      "max_steps": 1000,
      "capture_intermediate_results": true
    }
  },
  "bpa": {
     "max_rules": 120,
     "severity_at_least": "WARNING",
     "include_categories": ["Error Prevention", "Modeling", "Performance"],
     "max_tables": 60,
     "max_seconds": 60,
     "per_rule_max_ms": 500,
     "max_columns_per_rule": 5000,
     "max_measures_per_rule": 1000,
     "max_relationships_per_rule": 1000,
     "adaptive_timeouts": true,
     "parallel_rules": 4
  },
  "rate_limiting": {
    "enabled": true,
    "profile": "balanced",
    "global_calls_per_second": 10,
    "global_burst": 20,
    "tool_limits": {
      "run_dax": 5,
      "analyze_model_bpa": 1,
      "full_analysis": 0.5,
      "analyze_queries_batch": 2
    },
    "tool_bursts": {
      "run_dax": 10,
      "analyze_model_bpa": 3,
      "full_analysis": 2,
      "analyze_queries_batch": 5
    }
  },
  "security": {
    "enable_input_validation": true,
    "strict_m_validation": false,
    "max_export_path_length": 260,
    "allowed_export_extensions": [".json", ".csv", ".txt", ".xlsx", ".xml", ".graphml", ".yaml", ".yml"]
  },
  "validation": {
    "max_relationships_check": null,
    "warn_on_sampling": true
  },
  "tool_timeouts": {
    "list_tables": 5,
    "list_columns": 5,
    "list_measures": 5,
    "list_relationships": 10,
    "describe_table": 10,
    "preview_table_data": 15,
    "run_dax": 60,
    "analyze_model_bpa": 180,
    "full_analysis": 300,
    "analyze_queries_batch": 180,
    "export_tmsl": 30,
    "export_tmdl": 60,
    "generate_documentation": 60,
    "profile_query_detailed": 120,
    "batch_profile_queries": 300,
    "compare_query_performance": 180,
    "analyze_query_plan": 90
  },
  "performance_tracing": {
    "default_runs": 3,
    "default_clear_cache": true,
    "trace_backend_preference": ["amo", "xmla"],
    "event_timeout_seconds": 30,
    "max_batch_queries": 20,
    "auto_export_html": false,
    "export_directory": "./exports/performance"
  }
}
